{
    "nodes": [
        {
            "id": "node_start",
            "type": "start",
            "label": "Start",
            "position": {
                "x": 250,
                "y": 0
            },
            "data": {
                "initial_value": "Explain quantum entanglement to a 5-year old."
            }
        },
        {
            "id": "node_mem_init",
            "type": "memory",
            "label": "Store Objective",
            "position": {
                "x": 250,
                "y": 100
            },
            "data": {
                "operation": "set",
                "key": "goal",
                "persistent": false
            }
        },
        {
            "id": "node_generator",
            "type": "llm",
            "label": "Generator",
            "position": {
                "x": 250,
                "y": 200
            },
            "data": {
                "user_prompt": "Goal: {goal}\nPrevious Critique: {critique}\n\nDraft a perfect explanation:",
                "system_prompt": "You are an expert educator. If there is a critique, improve your explanation accordingly."
            }
        },
        {
            "id": "node_critic",
            "type": "llm",
            "label": "Critic",
            "position": {
                "x": 250,
                "y": 400
            },
            "data": {
                "user_prompt": "Evaluate this explanation for a 5-year old:\n{input}\n\nOutput JSON with 'score' (1-10) and 'critique' (text).",
                "system_prompt": "You are a strict grading assistant. Only output valid JSON."
            }
        },
        {
            "id": "node_extractor",
            "type": "variable_extractor",
            "label": "Extract Feedback",
            "position": {
                "x": 250,
                "y": 600
            },
            "data": {
                "mapping": "{\"score\": \"score\", \"critique\": \"critique\"}"
            }
        },
        {
            "id": "node_while",
            "type": "while_loop",
            "label": "Quality Check",
            "position": {
                "x": 250,
                "y": 750
            },
            "data": {
                "condition": "int(score) < 8",
                "max_iterations": 3
            }
        },
        {
            "id": "node_final",
            "type": "debug",
            "label": "Final Result",
            "position": {
                "x": 550,
                "y": 750
            },
            "data": {}
        }
    ],
    "edges": [
        {
            "id": "e1",
            "source": "node_start",
            "target": "node_mem_init"
        },
        {
            "id": "e2",
            "source": "node_mem_init",
            "target": "node_generator"
        },
        {
            "id": "e3",
            "source": "node_generator",
            "target": "node_critic"
        },
        {
            "id": "e4",
            "source": "node_critic",
            "target": "node_extractor"
        },
        {
            "id": "e5",
            "source": "node_extractor",
            "target": "node_while"
        },
        {
            "id": "e6",
            "source": "node_while",
            "target": "node_generator",
            "sourceHandle": "continue"
        },
        {
            "id": "e7",
            "source": "node_while",
            "target": "node_final",
            "sourceHandle": "done"
        }
    ]
}